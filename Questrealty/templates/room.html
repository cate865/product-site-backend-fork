{% extends 'base.html' %}

{% block title %}

{{room.name}}

{% endblock %}

{% block content %}
<div class="container content">
    <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
        	<div class="card">
        		<div class="card-header">Chat</div>

					<h2>{room}</h2>

					<form id="post_form">
						<div class="page-wrapper bg-gra-02 p-t-130 p-b-100 font-poppins">
							<div class="wrapper wrapper--w680">
								<div class="card card-4">
									<div class="card-body">
										
										<input type="hidden" name="username" id="username" value="username">
										<input type="hidden" name="room_id" id="room_id" value="room_id">
										<input type="text" name="message" id="message" width="100px"> 
										<input type="submit" value="send">   
									</div>   
								</div>
							</div>
					   </div>
					   {% crsf_token %}

					</form>
        		</div>
        	</div>
        </div>
    </div>
</div>

<script type="text/Javascript">
	$(document).on('submit', '#post-form', function(e) {
		e.preventDefault();

		$.ajax({
			type: 'POST',
			url: '/send',
			data:{
				username:$('#username').val(),
				room_id:$('#room_id').val(),
				message:$('#message').val(),
				csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),

			},
			success:function(data) {
				alert(data)
			}
		});
		document.getElementById('message').value = ''
	});

</script>

{% endblock %}
